<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jonathan Berdejo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet"/>
<style>
/* ===== Reset & Vars ===== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
:root{
  --bpm:72; --beat:calc(60s/var(--bpm));
  --neon:#00eaff; --bg:#000; --txt:#eaf6ff; --stroke:rgba(0,234,255,.18);
  --neonline:#ff1744;
}
/* ===== Base ===== */
body{font-family:'Poppins',system-ui;background:var(--bg);color:var(--txt);overflow-x:hidden}
/* ===== Fondo ===== */
.neon-bg{position:fixed;inset:0;z-index:0;overflow:hidden;pointer-events:none;background:radial-gradient(1200px 600px at 50% 60%,rgba(0,234,255,.06),transparent 70%)}
.stars{position:absolute;inset:0}
.star{position:absolute;width:2px;height:2px;border-radius:50%;background:#fff;opacity:0;filter:drop-shadow(0 0 6px rgba(255,255,255,.6));animation:twinkle var(--tw,3.5s) ease-in-out infinite var(--td,0s);transform:scale(var(--sc,1))}
@keyframes twinkle{0%,100%{opacity:0}10%{opacity:.9}50%{opacity:.3}90%{opacity:1}}
/* ===== Hero ===== */
.hero{min-height:100vh;display:grid;place-items:center;text-align:center}
.title{font-weight:900;letter-spacing:.04em;font-size:clamp(2.8rem,9vw,6.4rem);color:#e8fdff;text-shadow:0 0 18px var(--neon),0 0 48px var(--neon),0 0 120px var(--neon);animation:titleBeat var(--beat) ease-in-out infinite}
@keyframes titleBeat{0%{transform:scale(1)}8%{transform:scale(1.015)}18%{transform:scale(1.009)}26%,100%{transform:scale(1)}}
.footer{padding:40px 20px;color:#a9d7e5;text-align:center;border-top:1px solid var(--stroke)}
</style>
</head>
<body>
<div class="neon-bg" aria-hidden="true">
  <div class="stars"></div>
  <canvas id="starLinkCanvas" aria-hidden="true"></canvas>
</div>

<header class="hero">
  <h1 class="title">JONATHAN BERDEJO</h1>
</header>

<footer class="footer">© <span id="year"></span> Jonathan Berdejo</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

/* ========== Estrellas ========== */
(function(){
  const wrap=document.querySelector('.stars');if(!wrap)return;
  const N=220;const frag=document.createDocumentFragment();
  for(let i=0;i<N;i++){const s=document.createElement('i');s.className='star';
    s.style.left=(Math.random()*100)+'%';s.style.top=(Math.random()*100)+'%';
    s.style.setProperty('--sc',(0.6+Math.random()*1.8).toFixed(2));
    s.style.setProperty('--tw',(1.8+Math.random()*4.8).toFixed(2)+'s');
    s.style.setProperty('--td',(Math.random()*6).toFixed(2)+'s');frag.appendChild(s);}
  wrap.appendChild(frag);
})();

/* ========== 2 líneas cometas (segunda estrella más cercana, fluido, curvo) ========== */
(function(){
  const canvas=document.getElementById('starLinkCanvas');
  const starsWrap=document.querySelector('.stars');
  if(!canvas||!starsWrap)return;
  const ctx=canvas.getContext('2d');
  let W=0,H=0,DPR=Math.max(1,Math.min(2,window.devicePixelRatio||1));
  const neonLine=getComputedStyle(document.documentElement).getPropertyValue('--neonline').trim()||'#ff1744';

  function resize(){
    const Wcss=Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth,window.innerWidth);
    const Hcss=Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight,window.innerHeight);
    W=Math.round(Wcss);H=Math.round(Hcss);
    canvas.width=Math.round(W*DPR);canvas.height=Math.round(H*DPR);
    canvas.style.width=W+'px';canvas.style.height=H+'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);ctx.lineCap='round';
  }
  resize();window.addEventListener('resize',resize);

  function getStarPoints(){
    const nodes=starsWrap.querySelectorAll('.star');const pts=[];
    nodes.forEach(n=>{
      const left=parseFloat(n.style.left||'0');
      const top=parseFloat(n.style.top||'0');
      if(!isNaN(left)&&!isNaN(top)){pts.push({x:(left/100)*W,y:(top/100)*H});}
    });
    return pts.length?pts:[{x:W*0.3,y:H*0.3},{x:W*0.7,y:H*0.7}];
  }
  let points=getStarPoints();

  const RAYS=2,SPEED=900,DUR_MIN=0.36,DUR_MAX=1.5,MIN_DIST=40,TABU_LEN=3;
  const ANGLE_MIN=Math.PI/6,ANGLE_MAX=(5*Math.PI)/6;
  const BASE_WIDTH=1.2,TRAIL_LEN=36,TRAIL_FADE=0.9;
  const CURVE_MIN=14,CURVE_MAX=30;
  const EASE=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2;
  function norm(vx,vy){const m=Math.hypot(vx,vy)||1;return[vx/m,vy/m];}
  function randRange(a,b){return a+Math.random()*(b-a);}
  function sign(){return Math.random()<0.5?-1:1;}

  // Segunda estrella más cercana que cumpla condiciones
  function pickSecondNearest(fromIdx,prevDir,tabu){
    const from=points[fromIdx];
    const sorted=points.map((p,i)=>({i,d2:(p.x-from.x)**2+(p.y-from.y)**2}))
      .filter(o=>o.i!==fromIdx).sort((a,b)=>a.d2-b.d2);
    let valid=[];
    for(const cand of sorted){
      if(tabu.has(cand.i))continue;
      const dx=points[cand.i].x-from.x,dy=points[cand.i].y-from.y;
      const dist=Math.hypot(dx,dy);if(dist<MIN_DIST)continue;
      if(prevDir){
        const [ux,uy]=prevDir,[vx,vy]=norm(dx,dy);
        const ang=Math.acos(Math.max(-1,Math.min(1,ux*vx+uy*vy)));
        if(ang<ANGLE_MIN||ang>ANGLE_MAX)continue;
      }
      valid.push(cand.i);
      if(valid.length>=2)break;
    }
    if(valid.length>=2)return valid[1];
    if(valid.length===1)return valid[0];
    return sorted.length?sorted[0].i:fromIdx;
  }

  function makeRay(){
    points=getStarPoints();
    const startIdx=Math.floor(Math.random()*points.length);
    return{
      fromIdx:startIdx,toIdx:null,t0:performance.now(),dur:1,
      prevDir:null,tabu:new Set(),trail:[],curveAmp:randRange(CURVE_MIN,CURVE_MAX)*sign()
    };
  }

  function startHop(ray){
    if(!ray.tabu.has(ray.fromIdx)){
      ray.tabu.add(ray.fromIdx);
      if(ray.tabu.size>TABU_LEN){
        const arr=[...ray.tabu];arr.shift();ray.tabu=new Set(arr);
      }
    }
    const nextIdx=pickSecondNearest(ray.fromIdx,ray.prevDir,ray.tabu);
    ray.toIdx=nextIdx;
    const a=points[ray.fromIdx],b=points[ray.toIdx];
    const dist=Math.max(MIN_DIST,Math.hypot(b.x-a.x,b.y-a.y));
    const rawDur=dist/SPEED;
    ray.dur=Math.max(DUR_MIN,Math.min(DUR_MAX,rawDur));
    ray.t0=performance.now();
    ray.curveAmp=randRange(CURVE_MIN,CURVE_MAX)*sign();
  }

  function advance(ray){
    const a=points[ray.fromIdx],b=points[ray.toIdx];
    ray.prevDir=norm(b.x-a.x,b.y-a.y);
    ray.fromIdx=ray.toIdx;
    startHop(ray);
  }

  function getPos(ray,prog){
    const p=points[ray.fromIdx],q=points[ray.toIdx];
    const t=EASE(prog);
    const x=p.x+(q.x-p.x)*t,y=p.y+(q.y-p.y)*t;
    const [dx,dy]=[q.x-p.x,q.y-p.y];
    const [ux,uy]=norm(dx,dy);
    const nx=-uy,ny=ux;
    const offset=Math.sin(t*Math.PI)*ray.curveAmp;
    return{x:x+nx*offset,y:y+ny*offset};
  }

  function drawComet(ray,head){
    const L=ray.trail.length;
    for(let i=1;i<L;i++){
      const a=ray.trail[i-1],b=ray.trail[i],k=i/L;
      ctx.save();
      ctx.strokeStyle=neonLine;ctx.shadowColor=neonLine;
      ctx.globalAlpha=(k*TRAIL_FADE)*0.9;
      ctx.shadowBlur=16*k;
      ctx.lineWidth=BASE_WIDTH*(k*0.9);
      ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);ctx.stroke();ctx.restore();
    }
    const last=ray.trail[L-2]||head;
    ctx.save();
    ctx.strokeStyle=neonLine;ctx.shadowColor=neonLine;ctx.globalAlpha=1;ctx.shadowBlur=20;
    ctx.lineWidth=BASE_WIDTH;ctx.beginPath();ctx.moveTo(last.x,last.y);ctx.lineTo(head.x,head.y);ctx.stroke();
    ctx.fillStyle=neonLine;ctx.shadowBlur=12;ctx.beginPath();ctx.arc(head.x,head.y,1.3,0,Math.PI*2);ctx.fill();ctx.restore();
  }

  let rays=Array.from({length:RAYS},makeRay);
  rays.forEach(r=>startHop(r));

  let reduced=window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  window.matchMedia('(prefers-reduced-motion: reduce)').addEventListener('change',e=>reduced=e.matches);

  function tick(now){
    if(reduced){ctx.clearRect(0,0,W,H);return;}
    points=getStarPoints();
    ctx.clearRect(0,0,W,H);
    for(const ray of rays){
      const elapsed=(now-ray.t0)/1000;
      const prog=Math.min(1,elapsed/ray.dur);
      const head=getPos(ray,prog);
      ray.trail.push(head);
      if(ray.trail.length>TRAIL_LEN)ray.trail.shift();
      drawComet(ray,head);
      if(prog>=1){ray.trail=[head];advance(ray);}
    }
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
})();
</script>
</body>
</html>
